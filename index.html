<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Matrix + Glitch + Flags</title>
<style>
  body { margin:0; padding:0; background:#000; overflow:hidden; font-family: monospace; }
  canvas { display:block; position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; }

  .center { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; z-index:10; pointer-events:none; }
  .mainLine { color:#00ff55; font-size:4vw; letter-spacing:2px; text-shadow:0 0 26px rgba(0,255,120,0.12),0 0 6px rgba(0,255,120,0.25); position:relative; }
  .mainLine.glitch::before, .mainLine.glitch::after {
    content: attr(data-text); position:absolute; left:0; top:0; width:100%;
  }
  .mainLine.glitch::before { left:2px; text-shadow: -2px 0 #0f0; clip:rect(0,100%,0,0); animation: glitch1 1s infinite; }
  .mainLine.glitch::after { left:-2px; text-shadow: 2px 0 #0f0; clip:rect(0,100%,0,0); animation: glitch2 1.2s infinite; }
  @keyframes glitch1 {
    0%{clip:rect(0,9999px,0,0)}10%{clip:rect(2px,9999px,18px,0)}20%{clip:rect(5px,9999px,25px,0)}30%{clip:rect(0,9999px,0,0)}50%{clip:rect(8px,9999px,32px,0)}100%{clip:rect(0,9999px,0,0)}
  }
  @keyframes glitch2 {
    0%{clip:rect(0,9999px,0,0)}10%{clip:rect(10px,9999px,28px,0)}20%{clip:rect(4px,9999px,24px,0)}40%{clip:rect(0,9999px,0,0)}60%{clip:rect(6px,9999px,22px,0)}100%{clip:rect(0,9999px,0,0)}
  }

  .subLine { color:rgba(170,255,190,0.9); font-size:2vw; margin-top:10px; }

  .flag-overlay {
    position:fixed; inset:0; z-index:20; display:flex; align-items:center; justify-content:center;
    opacity:0; pointer-events:none; transition:opacity 0.3s ease;
  }
  .flag-overlay.visible { opacity:1; pointer-events:auto; }

  .flag-box { width:min(64vmin,520px); aspect-ratio:3/2; border-radius:8px; overflow:hidden; box-shadow:0 12px 40px rgba(0,0,0,0.7); }
  .pal .stripes { width:100%; height:100%; background:linear-gradient(#000 0 33.333%, #fff 33.333% 66.666%, #007a3d 66.666% 100%); position:relative; }
  .pal .triangle { position:absolute; left:0; top:0; bottom:0; width:45%; clip-path:polygon(0 50%,45% 0,45% 100%); background:#ce1126; }
  .egy .stripes { width:100%; height:100%; background:linear-gradient(#ce1126 0 33.333%, #fff 33.333% 66.666%, #000 66.666% 100%); position:relative; }
  .egy .egy-emblem { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); font-size:44px; color:#b38a00; text-shadow:0 2px 6px rgba(0,0,0,0.6); }

  .hint { position:fixed; bottom:12px; left:12px; z-index:30; color:rgba(255,255,255,0.65); background:rgba(0,0,0,0.18); padding:8px 10px; border-radius:8px; font-size:13px; }
</style>
</head>
<body>
<canvas id="matrix"></canvas>

<div class="center">
  <h1 id="line" class="mainLine" data-text="We are Anonymous">We are Anonymous</h1>
  <p id="subLine" class="subLine">Welcome to Hell</p>
</div>

<div class="hint">Press P = Palestine Â· Press E = Egypt</div>

<div id="flagPal" class="flag-overlay"><div class="flag-box pal"><div class="stripes"></div><div class="triangle"></div></div></div>
<div id="flagEgy" class="flag-overlay"><div class="flag-box egy"><div class="stripes"></div><div class="egy-emblem">ð“‚€</div></div></div>

<script>
// Matrix setup
const canvas = document.getElementById('matrix');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

window.addEventListener('resize', ()=>{
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
  initDrops();
});

const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&*";
let fontSize = 16;
let columns;
let drops = [];

function initDrops(){
  fontSize = Math.max(10, Math.floor(width / 90));
  columns = Math.floor(width / fontSize);
  drops = Array(columns).fill().map(() => Math.random() * -1000);
}
initDrops();

let speedFactor = 2.8;
function draw(){
  ctx.fillStyle = 'rgba(0,0,0,0.06)';
  ctx.fillRect(0,0,width,height);
  ctx.fillStyle = '#00ff55';
  ctx.font = fontSize + "px monospace";

  for(let i=0; i<drops.length; i++){
    const text = letters.charAt(Math.floor(Math.random()*letters.length));
    ctx.fillText(text, i*fontSize, drops[i]);
    drops[i] += fontSize * speedFactor * 0.1;
    if(drops[i] > height) drops[i] = Math.random()*-100;
  }
  requestAnimationFrame(draw);
}
draw();

// Flags
const flagPal = document.getElementById('flagPal');
const flagEgy = document.getElementById('flagEgy');
let paused = false;

function showFlag(flagEl){
  paused = true;
  flagEl.classList.add('visible');
  setTimeout(()=>{
    flagEl.classList.remove('visible');
    paused = false;
  },7000);
}

// Quotes with glitch
const mainLine = document.getElementById('line');
const subLine = document.getElementById('subLine');
const quotes = ["We are Anonymous","Welcome to Hell"];
let qIdx=0;

function setQuote(t){
  mainLine.setAttribute('data-text', t);
  mainLine.classList.add('glitch');
  setTimeout(()=>mainLine.classList.remove('glitch'),1000);
  mainLine.textContent = t;
}
function startQuotes(){
  setQuote(quotes[qIdx]);
  setInterval(()=>{
    if(!paused){
      qIdx = (qIdx+1)%quotes.length;
      setQuote(quotes[qIdx]);
    }
  },7000);
}
startQuotes();

// Key controls
window.addEventListener('keydown', (e)=>{
  const k = e.key.toLowerCase();
  if(k==='p'){ showFlag(flagPal); }
  if(k==='e'){ showFlag(flagEgy); }
  if(k==='arrowup'){ speedFactor = Math.min(8,speedFactor+0.2); }
  if(k==='arrowdown'){ speedFactor = Math.max(0.1,speedFactor-0.2); }
});
</script>
</body>
</html>
